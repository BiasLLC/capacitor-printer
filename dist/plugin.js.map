{"version":3,"file":"plugin.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst Printer = registerPlugin('Printer', {\n    web: () => import('./web').then((m) => new m.PrinterWeb()),\n});\nexport * from './definitions';\nexport { Printer };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nexport class PrinterWeb extends WebPlugin {\n    async printBase64(options) {\n        const { data, mimeType, name } = options;\n        // Convert base64 to blob\n        const byteCharacters = atob(data);\n        const byteNumbers = new Array(byteCharacters.length);\n        for (let i = 0; i < byteCharacters.length; i++) {\n            byteNumbers[i] = byteCharacters.charCodeAt(i);\n        }\n        const byteArray = new Uint8Array(byteNumbers);\n        const blob = new Blob([byteArray], { type: mimeType });\n        // Create object URL and print\n        const url = URL.createObjectURL(blob);\n        await this.printFromUrl(url, name);\n        URL.revokeObjectURL(url);\n    }\n    async printFile(options) {\n        const { path, name } = options;\n        // On web, we can only print URLs that are accessible\n        // This will work for file:// URLs in some browsers or HTTP(S) URLs\n        await this.printFromUrl(path, name);\n    }\n    async printHtml(options) {\n        const { html, name } = options;\n        // Create a blob URL from the HTML content\n        const blob = new Blob([html], { type: 'text/html' });\n        const url = URL.createObjectURL(blob);\n        await this.printFromUrl(url, name);\n        URL.revokeObjectURL(url);\n    }\n    async printPdf(options) {\n        const { path, name } = options;\n        // On web, print the PDF URL\n        await this.printFromUrl(path, name);\n    }\n    async printWebView(options) {\n        // Set document title for print job name\n        const originalTitle = document.title;\n        if (options === null || options === void 0 ? void 0 : options.name) {\n            document.title = options.name;\n        }\n        // Trigger browser print dialog\n        window.print();\n        // Restore original title\n        document.title = originalTitle;\n    }\n    async getPluginVersion() {\n        return { version: '7.0.0' };\n    }\n    async printFromUrl(url, name) {\n        return new Promise((resolve, reject) => {\n            // Create hidden iframe\n            const iframe = document.createElement('iframe');\n            iframe.style.position = 'fixed';\n            iframe.style.right = '0';\n            iframe.style.bottom = '0';\n            iframe.style.width = '0';\n            iframe.style.height = '0';\n            iframe.style.border = 'none';\n            // Set up load handler\n            iframe.onload = () => {\n                try {\n                    // Set document title if name provided\n                    if (name && iframe.contentDocument) {\n                        iframe.contentDocument.title = name;\n                    }\n                    // Small delay to ensure content is loaded\n                    setTimeout(() => {\n                        try {\n                            // Try to access the iframe's window\n                            const iframeWindow = iframe.contentWindow;\n                            if (!iframeWindow) {\n                                throw new Error('Cannot access iframe window');\n                            }\n                            // Print the iframe content\n                            iframeWindow.focus();\n                            iframeWindow.print();\n                            // Clean up after a delay\n                            setTimeout(() => {\n                                document.body.removeChild(iframe);\n                                resolve();\n                            }, 100);\n                        }\n                        catch (error) {\n                            document.body.removeChild(iframe);\n                            reject(error);\n                        }\n                    }, 100);\n                }\n                catch (error) {\n                    document.body.removeChild(iframe);\n                    reject(error);\n                }\n            };\n            iframe.onerror = () => {\n                document.body.removeChild(iframe);\n                reject(new Error('Failed to load content for printing'));\n            };\n            // Add iframe to document and set source\n            document.body.appendChild(iframe);\n            iframe.src = url;\n        });\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":"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"}